<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Impostor Party Game</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(160deg, #1f1c2c, #928dab);
      color: #fff;
      display: grid;
      place-items: center;
      padding: 1rem;
    }

    .app {
      width: min(720px, 100%);
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 1.25rem;
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.35);
    }

    h1, h2, h3 { margin: 0.2rem 0 0.8rem; }

    label { display: block; margin: 0.75rem 0 0.3rem; }

    input, select, button {
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      padding: 0.7rem 0.8rem;
      font: inherit;
    }

    input, select {
      width: 100%;
      background: rgba(255, 255, 255, 0.12);
      color: #fff;
    }

    button {
      background: #ffcc00;
      color: #222;
      cursor: pointer;
      margin-top: 0.8rem;
      font-weight: 600;
    }

    button.secondary {
      background: rgba(255,255,255,0.2);
      color: #fff;
      margin-left: 0.5rem;
    }

    button:disabled { opacity: 0.45; cursor: not-allowed; }

    .row { display: flex; gap: 0.5rem; }
    .row > * { flex: 1; }

    .panel { display: none; }
    .panel.active { display: block; }

    .chip-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.5rem;
    }

    .chip {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 999px;
      padding: 0.3rem 0.7rem;
      font-size: 0.9rem;
    }

    .center {
      text-align: center;
      padding: 1rem 0.3rem;
    }

    .big {
      font-size: clamp(1.2rem, 4vw, 2rem);
      margin: 0.8rem 0;
      font-weight: 700;
    }

    .muted { opacity: 0.8; }
  </style>
</head>
<body>
  <main class="app">
    <section id="login-panel" class="panel active">
      <h1>Impostor</h1>
      <p class="muted">Host login (local only)</p>
      <label for="host-name">Your name</label>
      <input id="host-name" type="text" placeholder="e.g. Alex" autocomplete="name" />
      <button id="login-btn">Continue</button>
    </section>

    <section id="setup-panel" class="panel">
      <h2>Round setup</h2>
      <p class="muted">Enter players in table order and configure the game.</p>

      <label for="player-name">Add player</label>
      <div class="row">
        <input id="player-name" type="text" placeholder="Player name" />
        <button id="add-player-btn">Add</button>
      </div>

      <div id="players" class="chip-list" aria-live="polite"></div>

      <label for="category">Category (100 words each)</label>
      <select id="category"></select>

      <label for="impostor-count">Number of impostors</label>
      <select id="impostor-count">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>

      <div>
        <button id="start-round-btn" disabled>Start pass-the-phone</button>
        <button id="reset-setup-btn" class="secondary">Reset</button>
      </div>
    </section>

    <section id="pass-panel" class="panel">
      <h2>Pass the phone</h2>
      <div class="center">
        <p id="turn-info" class="muted"></p>
        <button id="ready-btn"></button>
      </div>
    </section>

    <section id="reveal-panel" class="panel">
      <h2 id="reveal-player"></h2>
      <div class="center">
        <p class="muted">Your role</p>
        <p id="role-text" class="big"></p>
        <button id="hide-btn">Hide and pass</button>
      </div>
    </section>

    <section id="done-panel" class="panel">
      <h2>Round ready</h2>
      <p id="summary" class="muted"></p>
      <button id="new-round-btn">Start another round</button>
    </section>
  </main>

  <script>
    const categories = {
      Animals: [
        "Dog","Cat","Elephant","Lion","Tiger","Giraffe","Zebra","Kangaroo","Koala","Panda",
        "Dolphin","Shark","Whale","Octopus","Penguin","Eagle","Falcon","Owl","Parrot","Swan",
        "Horse","Cow","Sheep","Goat","Pig","Rabbit","Hamster","Squirrel","Fox","Wolf",
        "Bear","Deer","Moose","Rhino","Hippo","Crocodile","Alligator","Snake","Frog","Turtle",
        "Butterfly","Bee","Ant","Spider","Crab","Lobster","Seal","Otter","Camel","Donkey",
        "Cheetah","Leopard","Jaguar","Puma","Lynx","Chimpanzee","Gorilla","Orangutan","Baboon","Lemur",
        "Sloth","Armadillo","Hedgehog","Platypus","Walrus","Manatee","Narwhal","Seahorse","Jellyfish","Starfish",
        "Pelican","Flamingo","Toucan","Macaw","Peacock","Turkey","Duck","Goose","Ostrich","Emu",
        "Condor","Vulture","Crow","Raven","Hummingbird","Woodpecker","Mole","Badger","Weasel","Ferret",
        "Mongoose","Raccoon","Skunk","Porcupine","Beetle","Dragonfly","Moth","Firefly","Scorpion","Chameleon"
      ],
      Food: [
        "Pizza","Burger","Sushi","Pasta","Taco","Burrito","Salad","Soup","Steak","Sandwich",
        "Pancake","Waffle","Omelet","Curry","Ramen","Dumpling","Noodles","Rice","Paella","Lasagna",
        "Apple","Banana","Orange","Grapes","Strawberry","Blueberry","Mango","Pineapple","Peach","Pear",
        "Carrot","Potato","Tomato","Cucumber","Lettuce","Broccoli","Onion","Garlic","Mushroom","Corn",
        "Cheese","Yogurt","Chocolate","Cookie","Cake","Ice Cream","Donut","Popcorn","Pretzel","Nachos",
        "Croissant","Bagel","Baguette","Muffin","Brownie","Cheesecake","Tiramisu","Crepe","Fudge","Tart",
        "Spaghetti","Fettuccine","Penne","Linguine","Ravioli","Gnocchi","Risotto","Polenta","Falafel","Hummus",
        "Pita","Kebab","Gyro","Shawarma","Bibimbap","Pad Thai","Pho","Tom Yum","Fried Rice","Spring Roll",
        "Avocado","Watermelon","Kiwi","Coconut","Cherry","Lemon","Lime","Plum","Pomegranate","Fig",
        "Spinach","Asparagus","Artichoke","Eggplant","Zucchini","Celery","Peppers","Cauliflower","Cabbage","Peas"
      ],
      Places: [
        "Beach","Mountain","Desert","Forest","Jungle","Island","River","Lake","Waterfall","Canyon",
        "Airport","Train Station","Bus Stop","Harbor","Bridge","Tunnel","Highway","Parking Lot","Gas Station","Subway",
        "School","Library","Museum","Theater","Cinema","Hospital","Pharmacy","Bank","Post Office","Police Station",
        "Restaurant","Cafe","Bakery","Supermarket","Mall","Gym","Stadium","Zoo","Aquarium","Amusement Park",
        "Hotel","Campsite","Castle","Temple","Church","Mosque","Skyscraper","Factory","Farm","Lighthouse",
        "Volcano","Glacier","Swamp","Meadow","Prairie","Savanna","Tundra","Cliff","Cave","Valley",
        "University","College","Kindergarten","Courthouse","City Hall","Embassy","Fire Station","Prison","Nightclub","Bar",
        "Concert Hall","Opera House","Art Gallery","Planetarium","Bowling Alley","Golf Course","Tennis Court","Swimming Pool","Ice Rink","Spa",
        "Salon","Barbershop","Laundromat","Car Wash","Bookstore","Clothing Store","Toy Store","Flea Market","Food Truck","Rooftop",
        "Basement","Attic","Garden","Vineyard","Winery","Brewery","Quarry","Mine","Oasis","Skate Park"
      ],
      Jobs: [
        "Doctor","Nurse","Teacher","Engineer","Programmer","Designer","Chef","Baker","Farmer","Pilot",
        "Flight Attendant","Police Officer","Firefighter","Lawyer","Judge","Dentist","Pharmacist","Scientist","Researcher","Mechanic",
        "Electrician","Plumber","Carpenter","Architect","Construction Worker","Accountant","Banker","Cashier","Salesperson","Barber",
        "Hairdresser","Photographer","Journalist","Writer","Editor","Librarian","Translator","Musician","Singer","Actor",
        "Director","Athlete","Coach","Trainer","Waiter","Bartender","Delivery Driver","Taxi Driver","Security Guard","Paramedic",
        "Veterinarian","Surgeon","Therapist","Psychiatrist","Optometrist","Dietitian","Midwife","Radiologist","Anesthesiologist","Pathologist",
        "Principal","Professor","Tutor","Astronaut","Marine","Soldier","Sailor","Ranger","Lifeguard","Detective",
        "Inspector","Ambassador","Mayor","Politician","CEO","Manager","Supervisor","Consultant","Analyst","Statistician",
        "Data Scientist","Game Developer","Animator","Sound Engineer","Comedian","Dancer","Choreographer","Model","Influencer","Podcast Host",
        "Real Estate Agent","Insurance Agent","Financial Advisor","Social Worker","Psychologist","Urban Planner","Event Planner","Notary","Interpreter","Archivist"
      ],
      Objects: [
        "Chair","Table","Sofa","Bed","Lamp","Mirror","Clock","Calendar","Candle","Vase",
        "Phone","Laptop","Tablet","Keyboard","Mouse","Monitor","Printer","Camera","Headphones","Speaker",
        "Book","Notebook","Pen","Pencil","Eraser","Ruler","Backpack","Wallet","Keys","Umbrella",
        "Bottle","Cup","Plate","Bowl","Fork","Spoon","Knife","Pan","Pot","Toaster",
        "Bicycle","Helmet","Watch","Glasses","Shoes","Jacket","Hat","Scarf","Gloves","Ring",
        "Carpet","Curtain","Pillow","Blanket","Towel","Brush","Comb","Soap","Shampoo","Toothbrush",
        "Blender","Microwave","Refrigerator","Dishwasher","Washing Machine","Vacuum","Iron","Hair Dryer","Scissors","Screwdriver",
        "Hammer","Wrench","Drill","Ladder","Rope","Tape","Glue","Paint Brush","Crayon","Marker",
        "Suitcase","Purse","Belt","Bracelet","Necklace","Earrings","Sunglasses","Tie","Sock","Pants",
        "Passport","Ticket","Map","Compass","Flashlight","Battery","Charger","Cable","Remote Control","Magnifying Glass"
      ],
      Sports: [
        "Soccer","Basketball","Baseball","Tennis","Golf","Swimming","Running","Cycling","Boxing","Wrestling",
        "Volleyball","Badminton","Table Tennis","Rugby","American Football","Ice Hockey","Field Hockey","Cricket","Handball","Lacrosse",
        "Gymnastics","Diving","Rowing","Sailing","Surfing","Skiing","Snowboarding","Ice Skating","Fencing","Archery",
        "Weightlifting","Powerlifting","CrossFit","Yoga","Pilates","Martial Arts","Karate","Judo","Taekwondo","Jiu-Jitsu",
        "Kickboxing","Muay Thai","Sumo","Curling","Bobsled","Luge","Biathlon","Triathlon","Marathon","Sprint",
        "Hurdles","Long Jump","High Jump","Pole Vault","Shot Put","Javelin","Discus","Rock Climbing","Mountain Biking","BMX",
        "Skateboarding","Parkour","Equestrian","Polo","Water Polo","Synchronized Swimming","Canoeing","Kayaking","Windsurfing","Skydiving",
        "Motorsport","Formula 1","Rally","Motocross","Snooker","Billiards","Darts","Bowling","Squash","Racquetball",
        "Futsal","Beach Volleyball","Beach Soccer","Dodgeball","Softball","Netball","Hurling","Kabaddi","Floorball","Capoeira",
        "Decathlon","Pentathlon","Cross-Country","Steeplechase","Skeleton","Hang Gliding","Paragliding","Korfball","Sepak Takraw","Orienteering"
      ],
      Music: [
        "Rock","Pop","Jazz","Classical","Hip-Hop","R&B","Country","Blues","Electronic","Reggae",
        "Metal","Punk","Folk","Soul","Funk","Gospel","Latin","Salsa","Bossa Nova","Flamenco",
        "Opera","Rap","Piano","Guitar","Drums","Bass","Violin","Cello","Trumpet","Saxophone",
        "Flute","Clarinet","Harp","Accordion","Banjo","Mandolin","Ukulele","Synthesizer","Turntable","Microphone",
        "Concert","Festival","Album","Single","Playlist","Remix","Cover","Melody","Harmony","Rhythm",
        "Beat","Tempo","Chord","Scale","Octave","Lyrics","Chorus","Verse","Bridge","Solo",
        "Riff","Hook","Ballad","Anthem","Soundtrack","Vinyl","CD","Streaming","Recording Studio","Headliner",
        "Encore","Setlist","Backstage","DJ","Producer","Band","Choir","A Cappella","Dubstep","Techno",
        "Ambient","Trap","Indie","Alternative","Grunge","New Wave","Disco","House","Trance","EDM",
        "Tour","Musician","Songwriter","Lyricist","Orchestra","Symphony","Concerto","Sonata","Aria","Overture"
      ],
      Science: [
        "Physics","Chemistry","Biology","Astronomy","Geology","Ecology","Psychology","Sociology","Anthropology","Archaeology",
        "Mathematics","Statistics","Computer Science","Engineering","Medicine","Botany","Zoology","Genetics","Microbiology","Neuroscience",
        "Atom","Molecule","Element","Compound","Reaction","Catalyst","Enzyme","Protein","DNA","RNA",
        "Cell","Nucleus","Electron","Proton","Neutron","Photon","Quark","Galaxy","Solar System","Planet",
        "Star","Comet","Asteroid","Nebula","Black Hole","Dark Matter","Gravity","Magnetism","Electricity","Light",
        "Sound","Heat","Energy","Mass","Force","Velocity","Acceleration","Momentum","Pressure","Temperature",
        "Volume","Density","Acid","Base","Salt","Isotope","Radioactivity","Fusion","Fission","Evolution",
        "Natural Selection","Mutation","Fossil","Extinction","Ecosystem","Biome","Photosynthesis","Respiration","Osmosis","Diffusion",
        "Climate","Weather","Atmosphere","Ocean","Volcano","Earthquake","Tectonic Plate","Erosion","Solar Panel","Wind Turbine",
        "Vaccine","Antibiotic","Virus","Bacteria","Prion","Parasite","Hypothesis","Theory","Experiment","Laboratory"
      ],
      Movies: [
        "Action","Adventure","Comedy","Drama","Horror","Thriller","Romance","Sci-Fi","Fantasy","Animation",
        "Documentary","Musical","Western","Mystery","Crime","Spy","Superhero","War","Historical","Biographical",
        "Sequel","Prequel","Remake","Reboot","Franchise","Trilogy","Box Office","Trailer","Premiere","Award",
        "Oscar","Director","Actor","Actress","Producer","Screenwriter","Cinematographer","Composer","Editor","Casting",
        "Script","Plot","Twist","Cliffhanger","Flashback","Montage","Special Effects","CGI","Stunt","Audition",
        "Soundtrack","Credits","Subtitle","Dubbing","Film Festival","Blockbuster","Indie Film","Arthouse","Rating","Review",
        "Villain","Hero","Sidekick","Narrator","Cameo","Anti-Hero","Love Interest","Opening Scene","Climax","Scene",
        "Take","Blooper","Red Carpet","Post-Production","Streaming","Costume","Makeup","Lighting","Storyboard","Screenplay",
        "Close-Up","Wide Shot","Pan","Zoom","Cut","Fade","Dissolve","Theme Song","Merchandise","Poster",
        "Teaser","Character","Audience","Critic","Fan","Casting Call","Screen Test","Rehearsal","Premiere Night","Voice Actor"
      ],
      Countries: [
        "USA","Canada","Mexico","Brazil","Argentina","Chile","Colombia","Peru","Venezuela","Cuba",
        "UK","France","Germany","Italy","Spain","Portugal","Netherlands","Belgium","Switzerland","Austria",
        "Sweden","Norway","Denmark","Finland","Poland","Czech Republic","Hungary","Romania","Greece","Turkey",
        "Russia","China","Japan","South Korea","India","Pakistan","Bangladesh","Indonesia","Philippines","Vietnam",
        "Thailand","Malaysia","Singapore","Australia","New Zealand","Egypt","Nigeria","South Africa","Kenya","Ethiopia",
        "Morocco","Saudi Arabia","UAE","Israel","Iran","Iraq","Ukraine","Belarus","Serbia","Croatia",
        "Slovakia","Bulgaria","Albania","Ireland","Iceland","Georgia","Armenia","Azerbaijan","Kazakhstan","Uzbekistan",
        "Myanmar","Cambodia","Nepal","Sri Lanka","Mongolia","Taiwan","Jamaica","Costa Rica","Ecuador","Bolivia",
        "Paraguay","Uruguay","Algeria","Tunisia","Sudan","Ghana","Tanzania","Uganda","Cameroon","Ivory Coast",
        "Senegal","Zimbabwe","Mozambique","Angola","Madagascar","Panama","Libya","Jordan","Lebanon","Syria"
      ]
    };

    const panels = {
      login: document.getElementById('login-panel'),
      setup: document.getElementById('setup-panel'),
      pass: document.getElementById('pass-panel'),
      reveal: document.getElementById('reveal-panel'),
      done: document.getElementById('done-panel')
    };

    const MIN_PLAYERS = 3;

    const state = {
      host: '',
      players: [],
      category: 'Animals',
      word: '',
      impostors: new Set(),
      turn: 0,
      impostorCount: 1,
      startingPlayer: ''
    };

    const hostInput = document.getElementById('host-name');
    const loginBtn = document.getElementById('login-btn');
    const playerInput = document.getElementById('player-name');
    const addPlayerBtn = document.getElementById('add-player-btn');
    const playersView = document.getElementById('players');
    const categorySelect = document.getElementById('category');
    const impostorCountSelect = document.getElementById('impostor-count');
    const startRoundBtn = document.getElementById('start-round-btn');
    const resetSetupBtn = document.getElementById('reset-setup-btn');
    const readyBtn = document.getElementById('ready-btn');
    const turnInfo = document.getElementById('turn-info');
    const revealPlayer = document.getElementById('reveal-player');
    const roleText = document.getElementById('role-text');
    const hideBtn = document.getElementById('hide-btn');
    const summary = document.getElementById('summary');
    const newRoundBtn = document.getElementById('new-round-btn');

    function savePlayersToStorage() {
      localStorage.setItem('impostor_players', JSON.stringify(state.players));
    }

    function loadPlayersFromStorage() {
      try {
        const saved = localStorage.getItem('impostor_players');
        if (saved) state.players = JSON.parse(saved);
      } catch (e) {
        state.players = [];
      }
      refreshPlayers();
    }

    function show(panelName) {
      for (const panel of Object.values(panels)) panel.classList.remove('active');
      panels[panelName].classList.add('active');
    }

    function refreshPlayers() {
      playersView.innerHTML = '';
      state.players.forEach((name, index) => {
        const tag = document.createElement('span');
        tag.className = 'chip';
        tag.textContent = `${index + 1}. ${name}`;
        playersView.appendChild(tag);
      });
      const maxImpostors = Math.max(1, state.players.length - 2);
      for (const option of impostorCountSelect.options) {
        option.disabled = Number(option.value) > maxImpostors;
      }
      if (Number(impostorCountSelect.value) > maxImpostors) {
        impostorCountSelect.value = String(maxImpostors);
      }
      state.impostorCount = Number(impostorCountSelect.value);
      startRoundBtn.disabled = state.players.length < MIN_PLAYERS;
    }

    function randomPick(list) {
      return list[Math.floor(Math.random() * list.length)];
    }

    function createRound() {
      const pool = [...state.players.keys()];
      state.impostors = new Set();
      while (state.impostors.size < state.impostorCount && pool.length) {
        const randomIndex = Math.floor(Math.random() * pool.length);
        const [picked] = pool.splice(randomIndex, 1);
        state.impostors.add(picked);
      }
      state.word = randomPick(categories[state.category]);
      state.turn = 0;
    }

    function updateTurnPrompt() {
      const player = state.players[state.turn];
      if (!player) return;
      turnInfo.textContent = `Pass to player ${state.turn + 1} of ${state.players.length}`;
      readyBtn.textContent = `${player}, tap when ready`;
    }

    Object.keys(categories).forEach((name) => {
      const option = document.createElement('option');
      option.value = name;
      option.textContent = name;
      categorySelect.appendChild(option);
    });

    loginBtn.addEventListener('click', () => {
      const host = hostInput.value.trim();
      if (!host) return;
      state.host = host;
      show('setup');
      loadPlayersFromStorage();
      playerInput.focus();
    });

    addPlayerBtn.addEventListener('click', () => {
      const name = playerInput.value.trim();
      if (!name || state.players.includes(name)) return;
      state.players.push(name);
      playerInput.value = '';
      savePlayersToStorage();
      refreshPlayers();
      playerInput.focus();
    });

    playerInput.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') addPlayerBtn.click();
    });

    categorySelect.addEventListener('change', () => {
      state.category = categorySelect.value;
    });

    impostorCountSelect.addEventListener('change', () => {
      state.impostorCount = Number(impostorCountSelect.value);
    });

    resetSetupBtn.addEventListener('click', () => {
      state.players = [];
      savePlayersToStorage();
      refreshPlayers();
    });

    startRoundBtn.addEventListener('click', () => {
      state.category = categorySelect.value;
      state.impostorCount = Number(impostorCountSelect.value);
      createRound();
      updateTurnPrompt();
      show('pass');
    });

    readyBtn.addEventListener('click', () => {
      const player = state.players[state.turn];
      const isImpostor = state.impostors.has(state.turn);
      revealPlayer.textContent = player;
      roleText.textContent = isImpostor
        ? (state.impostorCount > 1 ? `You are an IMPOSTOR (${state.impostorCount} impostors total)` : 'You are the IMPOSTOR')
        : state.word;
      show('reveal');
    });

    hideBtn.addEventListener('click', () => {
      state.turn += 1;
      if (state.turn >= state.players.length) {
        state.startingPlayer = randomPick(state.players);
        summary.textContent = `${state.host}'s round is ready. ${state.startingPlayer} starts. Category: ${state.category}. Total players: ${state.players.length}.`;
        show('done');
        return;
      }
      updateTurnPrompt();
      show('pass');
    });

    newRoundBtn.addEventListener('click', () => {
      createRound();
      updateTurnPrompt();
      show('pass');
    });

    refreshPlayers();
  </script>
</body>
</html>
